# ==========================================
# BrainSAIT-NPHIES-GIVC Integration
# Enhanced Configuration with NPHIES & GIVC
# ==========================================

# Application Settings
APP_NAME=BrainSAIT-NPHIES-GIVC-Integration
APP_VERSION=2.0.0
ENVIRONMENT=production
DEBUG=False
LOG_LEVEL=INFO

# Worksheet Automation
FOLLOW_UP_WORKBOOK_PATH=./daily-follow-ups.xlsx
ACCOUNTS_WORKBOOK_PATH=./Accounts.xlsx

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1
WORKERS=4

# Security
SECRET_KEY=change-this-to-a-secure-random-key-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Database
DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/brainsait_nphies
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Redis Cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Session Management
SESSION_TIMEOUT=3600
MAX_RETRY_ATTEMPTS=3
RETRY_BACKOFF_FACTOR=2

# ==========================================
# NPHIES Configuration
# ==========================================

# NPHIES Production Environment
NPHIES_ENVIRONMENT=production
NPHIES_BASE_URL=https://HSB.nphies.sa
NPHIES_AUTH_URL=https://sso.nphies.sa
NPHIES_REALM=sehaticoreprod
NPHIES_CLIENT_ID=community

# Al Hayat Hospital NPHIES Credentials
NPHIES_HOSPITAL_ID=10000000000988
NPHIES_CHI_ID=1048
NPHIES_LICENSE=7000911508

# NPHIES Certificate Authentication
NPHIES_CERT_PATH=./certificates/nphies_production.pem
NPHIES_KEY_PATH=./certificates/nphies_production_key.pem
NPHIES_CERT_PASSWORD=

# NPHIES FTP Configuration
NPHIES_FTP_HOST=172.25.11.15
NPHIES_FTP_PORT=21
NPHIES_FTP_USERNAME=
NPHIES_FTP_PASSWORD=

# ==========================================
# GIVC Platform Configuration
# ==========================================

GIVC_PLATFORM_URL=https://4d31266d.givc-platform-static.pages.dev/
GIVC_API_ENDPOINT=https://4d31266d.givc-platform-static.pages.dev/api
GIVC_ENABLED=true

# BrainSAIT Ultrathink AI
ULTRATHINK_AI_ENABLED=true
ULTRATHINK_API_KEY=
AI_VALIDATION_ENABLED=true
SMART_COMPLETION_ENABLED=true
ERROR_PREDICTION_ENABLED=true

# ==========================================
# TAWUNIYA Insurance Configuration
# ==========================================

TAWUNIYA_ENABLED=true
TAWUNIYA_LICENSE=7000911508
TAWUNIYA_GROUP_CODE=1096
TAWUNIYA_CONTACT=MOHAMMED SALEH

# TAWUNIYA API Credentials
TAWUNIYA_API_URL=
TAWUNIYA_API_KEY=
TAWUNIYA_USERNAME=
TAWUNIYA_PASSWORD=

# ==========================================
# NCCI Referral System
# ==========================================

NCCI_ENABLED=true
NCCI_ACCOUNT=INS-809
NCCI_LICENSE=7000911508
NCCI_API_URL=
NCCI_USERNAME=
NCCI_PASSWORD=

# ==========================================
# Portal Timeouts (seconds)
# ==========================================

OASES_TIMEOUT=30
MOH_TIMEOUT=30
JISR_TIMEOUT=30
BUPA_TIMEOUT=30
CLAIMS_TIMEOUT=30
NPHIES_TIMEOUT=60

# Circuit Breaker Settings
CIRCUIT_BREAKER_FAIL_MAX=5
CIRCUIT_BREAKER_RESET_TIMEOUT=60

# ==========================================
# OASES Portal Credentials
# ==========================================

# OASES Riyadh (128.1.1.185)
OASES_RIYADH_URL=https://128.1.1.185/prod/faces/Home
OASES_RIYADH_USERNAME=YOUR_OASES_USERNAME
OASES_RIYADH_PASSWORD=YOUR_OASES_PASSWORD

# OASES Madinah (172.25.11.26)
OASES_MADINAH_URL=http://172.25.11.26/Oasis/faces/Login.jsf
OASES_MADINAH_USERNAME=YOUR_OASES_USERNAME
OASES_MADINAH_PASSWORD=YOUR_OASES_PASSWORD

# OASES Unaizah (10.0.100.105)
OASES_UNAIZAH_URL=http://10.0.100.105/prod/faces/Login.jsf
OASES_UNAIZAH_USERNAME=YOUR_OASES_USERNAME
OASES_UNAIZAH_PASSWORD=YOUR_OASES_PASSWORD

# OASES Khamis (172.30.0.77)
OASES_KHAMIS_URL=http://172.30.0.77/prod/faces/Login.jsf
OASES_KHAMIS_USERNAME=YOUR_OASES_USERNAME
OASES_KHAMIS_PASSWORD=YOUR_OASES_PASSWORD

# OASES Jizan (172.17.4.84)
OASES_JIZAN_URL=http://172.17.4.84/prod/faces/Login.jsf
OASES_JIZAN_USERNAME=YOUR_OASES_USERNAME
OASES_JIZAN_PASSWORD=YOUR_OASES_PASSWORD

# OASES Abha (172.19.1.1)
OASES_ABHA_URL=http://172.19.1.1/Oasis/faces/Home
OASES_ABHA_USERNAME=YOUR_OASES_USERNAME
OASES_ABHA_PASSWORD=YOUR_OASES_PASSWORD

# ==========================================
# MOH Portal Credentials
# ==========================================

MOH_APPROVAL_URL=
MOH_CLAIMS_URL=https://e-claims.globemedsaudi.com/login.html

# MOH Riyadh (C1120)
MOH_RIYADH_USERNAME=YOUR_MOH_USERNAME
MOH_RIYADH_PASSWORD=YOUR_MOH_PASSWORD
MOH_RIYADH_APPROVAL_USER=YOUR_MOH_APPROVAL_USER

# MOH Khamis (C1437)
MOH_KHAMIS_USERNAME=YOUR_MOH_USERNAME
MOH_KHAMIS_PASSWORD=YOUR_MOH_PASSWORD
MOH_KHAMIS_APPROVAL_USER=YOUR_MOH_APPROVAL_USER

# MOH Unaizah (C1287)
MOH_UNAIZAH_USERNAME=YOUR_MOH_USERNAME
MOH_UNAIZAH_PASSWORD=YOUR_MOH_PASSWORD
MOH_UNAIZAH_APPROVAL_USER=YOUR_MOH_APPROVAL_USER

# MOH Jizan (H513881)
MOH_JIZAN_USERNAME=YOUR_MOH_USERNAME
MOH_JIZAN_PASSWORD=YOUR_MOH_PASSWORD
MOH_JIZAN_APPROVAL_USER=YOUR_MOH_APPROVAL_USER

# MOH Abha (H563301)
MOH_ABHA_USERNAME=YOUR_MOH_USERNAME
MOH_ABHA_PASSWORD=YOUR_MOH_PASSWORD
MOH_ABHA_APPROVAL_USER=YOUR_MOH_APPROVAL_USER

# MOH Madinah (C1531)
MOH_MADINAH_USERNAME=YOUR_MOH_USERNAME
MOH_MADINAH_PASSWORD=YOUR_MOH_PASSWORD
MOH_MADINAH_APPROVAL_USER=YOUR_MOH_APPROVAL_USER

# ==========================================
# Jisr Portal Credentials
# ==========================================

JISR_PORTAL_URL=
JISR_TIMEOUT=30

# Jisr Riyadh
JISR_RIYADH_USERNAME=YOUR_JISR_USERNAME
JISR_RIYADH_PASSWORD=YOUR_JISR_PASSWORD

# Jisr Madinah
JISR_MADINAH_USERNAME=YOUR_JISR_USERNAME
JISR_MADINAH_PASSWORD=YOUR_JISR_PASSWORD

# Jisr Khamis
JISR_KHAMIS_USERNAME=YOUR_JISR_USERNAME
JISR_KHAMIS_PASSWORD=YOUR_JISR_PASSWORD

# Jisr Unaizah
JISR_UNAIZAH_USERNAME=YOUR_JISR_USERNAME
JISR_UNAIZAH_PASSWORD=YOUR_JISR_PASSWORD

# Jisr Jizan
JISR_JIZAN_USERNAME=YOUR_JISR_USERNAME
JISR_JIZAN_PASSWORD=YOUR_JISR_PASSWORD

# Jisr Abha
JISR_ABHA_USERNAME=YOUR_JISR_USERNAME
JISR_ABHA_PASSWORD=YOUR_JISR_PASSWORD

# ==========================================
# Bupa Portal Credentials
# ==========================================

BUPA_PORTAL_URL=
BUPA_TIMEOUT=30

# Bupa Riyadh
BUPA_RIYADH_USERNAME=YOUR_BUPA_USERNAME
BUPA_RIYADH_PASSWORD=YOUR_BUPA_PASSWORD

# Bupa Jizan
BUPA_JIZAN_USERNAME=YOUR_BUPA_USERNAME
BUPA_JIZAN_PASSWORD=YOUR_BUPA_PASSWORD

# Bupa Madinah
BUPA_MADINAH_USERNAME=YOUR_BUPA_USERNAME
BUPA_MADINAH_PASSWORD=YOUR_BUPA_PASSWORD

# Bupa Unaizah
BUPA_UNAIZAH_USERNAME=YOUR_BUPA_USERNAME
BUPA_UNAIZAH_PASSWORD=YOUR_BUPA_PASSWORD
BUPA_UNAIZAH_ALT_USERNAME=YOUR_BUPA_ALT_USERNAME
BUPA_UNAIZAH_ALT_PASSWORD=YOUR_BUPA_ALT_PASSWORD

# Bupa Khamis
BUPA_KHAMIS_USERNAME=YOUR_BUPA_USERNAME
BUPA_KHAMIS_PASSWORD=YOUR_BUPA_PASSWORD

# Bupa Abha
BUPA_ABHA_USERNAME=
BUPA_ABHA_PASSWORD=

# ==========================================
# Remote Desktop Access
# ==========================================

# Jizan Remote Access
REMOTE_JIZAN_IP=YOUR_REMOTE_IP
REMOTE_JIZAN_USERNAME=YOUR_REMOTE_USERNAME
REMOTE_JIZAN_PASSWORD=YOUR_REMOTE_PASSWORD
REMOTE_JIZAN_PORT=3389

# Madinah Remote Access
REMOTE_MADINAH_IP=YOUR_REMOTE_IP
REMOTE_MADINAH_USERNAME=YOUR_REMOTE_USERNAME
REMOTE_MADINAH_PASSWORD=YOUR_REMOTE_PASSWORD
REMOTE_MADINAH_PORT=3389

# Khamis Remote Access
REMOTE_KHAMIS_IP=YOUR_REMOTE_IP
REMOTE_KHAMIS_USERNAME=YOUR_REMOTE_USERNAME
REMOTE_KHAMIS_PASSWORD=YOUR_REMOTE_PASSWORD
REMOTE_KHAMIS_PORT=3389

# Unaizah Remote Access
REMOTE_UNAIZAH_IP=YOUR_REMOTE_IP
REMOTE_UNAIZAH_USERNAME=YOUR_REMOTE_USERNAME
REMOTE_UNAIZAH_PASSWORD=YOUR_REMOTE_PASSWORD
REMOTE_UNAIZAH_PORT=3389

# ==========================================
# Logging Configuration
# ==========================================

LOG_FILE_PATH=./logs/brainsait_nphies.log
LOG_ROTATION=500 MB
LOG_RETENTION=30 days
LOG_FORMAT=json

# Advanced Logging
LOG_NPHIES_TRANSACTIONS=true
LOG_CLAIM_SUBMISSIONS=true
LOG_ELIGIBILITY_CHECKS=true
LOG_AUTH_REQUESTS=true

# ==========================================
# Monitoring and Analytics
# ==========================================

MONITORING_ENABLED=true
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=60
UPTIME_TARGET=99.9
ALERT_THRESHOLD=95.0

# Statistics Tracking
TRACK_INSURANCE_PROVIDERS=true
TRACK_HEALTHCARE_FACILITIES=true
TRACK_ACTIVE_TRANSACTIONS=true
TRACK_RESPONSE_TIMES=true

# ==========================================
# Feature Flags
# ==========================================

FEATURE_NPHIES_INTEGRATION=true
FEATURE_GIVC_PLATFORM=true
FEATURE_AI_VALIDATION=true
FEATURE_SMART_FORMS=true
FEATURE_REAL_TIME_MONITORING=true
FEATURE_BATCH_PROCESSING=true
FEATURE_MULTI_PORTAL_SUBMISSION=true

# ==========================================
# Microsoft Teams Integration
# ==========================================

# Teams Webhooks Configuration
# Note: Webhook URLs are stored in HashiCorp Vault for security
# Path: secret/teams/webhooks
TEAMS_WEBHOOK_VAULT_PATH=secret/teams/webhooks
TEAMS_WEBHOOK_ENABLED=true

# Rate Limiting (Token Bucket Algorithm)
TEAMS_RATE_LIMIT_REQUESTS=60
TEAMS_RATE_LIMIT_PERIOD=60
TEAMS_RATE_LIMIT_BURST=10

# Security
# Generate with: openssl rand -hex 32
TEAMS_HMAC_SECRET_KEY=your-32-byte-secret-key-here-change-in-production

# Retry Configuration
TEAMS_MAX_RETRIES=3
TEAMS_RETRY_FACTOR=2
TEAMS_MAX_RETRY_DELAY=60

# Connection Settings
TEAMS_CONNECTION_TIMEOUT=30
TEAMS_TOTAL_CONNECTIONS=100
TEAMS_CONNECTIONS_PER_HOST=10

# Stakeholder Webhook URLs (Loaded from Vault in production)
# These are examples - actual URLs come from Teams Workflows
# Format: https://prod-XX.region.logic.azure.com:443/workflows/.../triggers/manual/paths/invoke?...
TEAMS_WEBHOOK_SECURITY_ENG=https://example.com/webhook/security-engineering
TEAMS_WEBHOOK_CLOUDOPS=https://example.com/webhook/cloudops
TEAMS_WEBHOOK_RUNTIME_ENG=https://example.com/webhook/runtime-engineering
TEAMS_WEBHOOK_DEVOPS=https://example.com/webhook/devops
TEAMS_WEBHOOK_SRE=https://example.com/webhook/sre
TEAMS_WEBHOOK_COMPLIANCE=https://example.com/webhook/compliance
TEAMS_WEBHOOK_NPHIES_INTEGRATION=https://example.com/webhook/nphies-integration
TEAMS_WEBHOOK_PMO=https://example.com/webhook/pmo

# Dashboard URLs (Used in Adaptive Cards)
GRAFANA_URL=https://grafana.claimlinc.sa
FLOWER_URL=https://flower.claimlinc.sa
KIBANA_URL=https://kibana.claimlinc.sa
NPHIES_PORTAL_URL=https://portal.nphies.sa
NPHIES_STATUS_URL=https://status.nphies.sa
NPHIES_DOCS_URL=https://docs.nphies.sa
CLAIMLINC_URL=https://claimlinc.sa

# Runbook URLs
VAULT_RUNBOOK_URL=https://docs.claimlinc.sa/runbooks/vault-seal-recovery
CELERY_RUNBOOK_URL=https://docs.claimlinc.sa/runbooks/celery-task-recovery
NPHIES_RUNBOOK_URL=https://docs.claimlinc.sa/runbooks/nphies-integration

# Redis Pub/Sub for Teams Events
TEAMS_REDIS_CHANNEL_PREFIX=teams:events:
TEAMS_EVENT_TTL=86400

# PostgreSQL Audit Logging
TEAMS_AUDIT_RETENTION_DAYS=90
TEAMS_AUDIT_TABLE=teams_notifications

# ==========================================
# Development Settings
# ==========================================

# Enable for development only
DEV_MODE=false
DEV_MOCK_NPHIES=false
DEV_SKIP_CERTIFICATE_VALIDATION=false
DEV_VERBOSE_LOGGING=false
DEV_MOCK_TEAMS_WEBHOOKS=false

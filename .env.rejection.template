# ClaimLinc Rejection Management System - Environment Configuration
# Copy this file to .env.local and fill in actual values

# =============================================================================
# PAYER CREDENTIALS (Vault in production)
# =============================================================================

# Bupa Arabia
BUPA_USERNAME=your_bupa_username
BUPA_PASSWORD=your_bupa_password

# GlobeMed
GLOBEMED_USERNAME=your_globemed_username
GLOBEMED_PASSWORD=your_globemed_password

# Waseel/Tawuniya
WASEEL_USERNAME=your_waseel_username
WASEEL_PASSWORD=your_waseel_password
WASEEL_API_KEY=your_waseel_api_key

# NPHIES Integration (for Waseel/Tawuniya)
NPHIES_API_BASE=https://api.nphies.sa
NPHIES_API_KEY=your_nphies_api_key
NPHIES_REALM=realm_code

# =============================================================================
# BRANCH ROUTING & NOTIFICATIONS
# =============================================================================

# Riyadh Branch
EMAIL_OPS_RIYADH=ops.riyadh@alhayat.example
TEAMS_RIYADH=teams://AlHayat/MainRiyadh/Claims
PHONE_RIYADH=+966-11-XXXXXX

# Unaizah Branch
EMAIL_OPS_UNAIZAH=ops.unaizah@alhayat.example
TEAMS_UNAIZAH=teams://AlHayat/Unaizah/Claims
PHONE_UNAIZAH=+966-16-XXXXXX

# Abha Branch
EMAIL_OPS_ABHA=ops.abha@alhayat.example
TEAMS_ABHA=teams://AlHayat/Abha/Claims
PHONE_ABHA=+966-17-XXXXXX

# Madinah Branch
EMAIL_OPS_MADINAH=ops.madinah@alhayat.example
TEAMS_MADINAH=teams://AlHayat/Madinah/Claims
PHONE_MADINAH=+966-14-XXXXXX

# Khamis Mushait Branch
EMAIL_OPS_KHAMIS=ops.khamis@alhayat.example
TEAMS_KHAMIS=teams://AlHayat/Khamis/Claims
PHONE_KHAMIS=+966-17-XXXXXX

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true
SENDER_EMAIL=noreply@claimlinc.brainsait.io
SENDER_PASSWORD=your_email_app_password

# CC/BCC for rejection reports
EMAIL_CC_GENERAL=claims-manager@alhayat.example
EMAIL_CC_FINANCE=finance@alhayat.example

# =============================================================================
# TEAMS INTEGRATION
# =============================================================================

TEAMS_WEBHOOK_BASE=https://outlook.webhook.office.com/webhookb2/

# Individual Teams channel webhooks (for direct notification)
TEAMS_WEBHOOK_RIYADH=https://outlook.webhook.office.com/webhookb2/.../MainRiyadh
TEAMS_WEBHOOK_UNAIZAH=https://outlook.webhook.office.com/webhookb2/.../Unaizah
TEAMS_WEBHOOK_ABHA=https://outlook.webhook.office.com/webhookb2/.../Abha
TEAMS_WEBHOOK_MADINAH=https://outlook.webhook.office.com/webhookb2/.../Madinah
TEAMS_WEBHOOK_KHAMIS=https://outlook.webhook.office.com/webhookb2/.../Khamis

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL (for rejection tracking)
DATABASE_URL=postgresql://user:password@localhost:5432/claimlinc_rejections

# MongoDB (alternative for document storage)
MONGODB_URL=mongodb://localhost:27017/claimlinc_rejections

# =============================================================================
# REDIS CONFIGURATION (for caching and queuing)
# =============================================================================

REDIS_URL=redis://localhost:6379
REDIS_DB=0

# =============================================================================
# FILE STORAGE
# =============================================================================

# Local file storage
REJECTION_DOWNLOAD_DIR=/data/downloads/rejections
REJECTION_ANALYSIS_DIR=/data/analysis/rejections
REJECTION_EXPORT_DIR=/data/exports/rejections

# Cloud storage (AWS S3)
AWS_S3_BUCKET=claimlinc-rejections
AWS_REGION=eu-west-1
AWS_ACCESS_KEY_ID=your_aws_key
AWS_SECRET_ACCESS_KEY=your_aws_secret

# Alternative: Coolify/Backblaze B2
B2_BUCKET=claimlinc-rejections
B2_APP_KEY_ID=your_b2_key_id
B2_APP_KEY=your_b2_app_key

# =============================================================================
# REJECTION MONITORING & SCHEDULING
# =============================================================================

# Enable/disable monitoring
ENABLE_REJECTION_MONITORING=true

# Monitoring intervals (seconds)
BUPA_MONITORING_INTERVAL=1800        # 30 minutes
GLOBEMED_MONITORING_INTERVAL=1800    # 30 minutes
WASEEL_MONITORING_INTERVAL=3600      # 1 hour

# Full cycle execution schedule (cron format)
REJECTION_CYCLE_SCHEDULE=0 */6 * * *  # Every 6 hours

# Portal monitoring timeout
PORTAL_MONITORING_TIMEOUT=300         # 5 minutes per portal

# =============================================================================
# AI ANALYSIS CONFIGURATION
# =============================================================================

# LLM Provider (anthropic, openai, local)
LLM_PROVIDER=anthropic
ANTHROPIC_API_KEY=your_anthropic_api_key

# Analysis confidence threshold (0-1)
ANALYSIS_CONFIDENCE_THRESHOLD=0.75

# Enable pattern detection
ENABLE_PATTERN_DETECTION=true

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================

# PDPL (Saudi Personal Data Protection Law)
ENABLE_PHI_MASKING=true
PHI_HASH_ALGORITHM=sha256

# Audit logging
AUDIT_LOG_DIR=/var/log/claimlinc/audit
AUDIT_RETENTION_DAYS=2190  # 6 years per Saudi regulations

# Encryption at rest
ENCRYPTION_KEY=your_encryption_key_base64
ENCRYPTION_ALGORITHM=AES-256-GCM

# =============================================================================
# MONITORING & ALERTING
# =============================================================================

# Grafana/Prometheus
PROMETHEUS_PUSHGATEWAY=http://localhost:9091
GRAFANA_URL=http://localhost:3000
GRAFANA_API_KEY=your_grafana_api_key

# Alert thresholds
ALERT_THRESHOLD_CRITICAL_REJECTIONS=5      # Number of critical rejections to trigger alert
ALERT_THRESHOLD_MONTHLY_LOSS=500000        # SAR amount to trigger alert
ALERT_THRESHOLD_PORTAL_DOWNTIME=900        # Seconds (15 minutes)

# Alert channels
ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
ALERT_PAGERDUTY_KEY=your_pagerduty_key

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Enable headless mode for portal bots
PORTAL_BOT_HEADLESS=true

# Debug mode
DEBUG_MODE=false

# Test data generation
ENABLE_TEST_DATA=false
TEST_DATA_REJECTION_COUNT=20

# Mock payer portals in testing
MOCK_PAYER_PORTALS=false

# =============================================================================
# DEPLOYMENT CONTEXT
# =============================================================================

# Environment: development, staging, production
ENVIRONMENT=development

# API configuration
API_HOST=0.0.0.0
API_PORT=8088
API_LOG_LEVEL=INFO

# CORS settings
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]

# =============================================================================
# INTEGRATION ENDPOINTS
# =============================================================================

# n8n workflow webhooks
N8N_BASE_URL=http://localhost:5678
N8N_WEBHOOK_BUPA=http://localhost:5678/webhook/claimlinc-bupa-rejections
N8N_WEBHOOK_GLOBEMED=http://localhost:5678/webhook/claimlinc-globemed-rejections
N8N_WEBHOOK_WASEEL=http://localhost:5678/webhook/claimlinc-waseel-rejections

# Coolify integration (for deployment)
COOLIFY_API_URL=https://app.coolify.io/api
COOLIFY_API_KEY=your_coolify_api_key

# =============================================================================
# VERSION & BUILD INFO
# =============================================================================

APP_VERSION=2.1
BUILD_TIMESTAMP=2025-11-08
GIT_COMMIT_SHA=auto-detected
